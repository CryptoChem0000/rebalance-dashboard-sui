services:
  app:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: external-lp-rebalance-with-bolt
    restart: unless-stopped
    stop_grace_period: 120s
    environment:
      # Env vars
      - MNEMONIC=${MNEMONIC}
      - DATABASE_URL=${DATABASE_URL}

      # Frequency in seconds when the position status will be checked and a rebalance may happen (default 300 seconds)
      - WATCH_FREQUENCY=${WATCH_FREQUENCY:-300}
      
      # Config overrides
      - POOL_ID=${POOL_ID}
      - REBALANCE_THRESHOLD_PERCENT=${REBALANCE_THRESHOLD_PERCENT}
      - POSITION_BAND_PERCENTAGE=${POSITION_BAND_PERCENTAGE}
      - CHAIN=${CHAIN}
      
      # Config file path (default: ./docker-files/config/config.json)
      - CONFIG_FILE=${CONFIG_FILE:-./docker-files/config/config.json}
    volumes:
      # Map container's logs folder to host's docker-files/logs folder
      - ./docker-files/logs:/app/logs
      # Map container's database folder to host's docker-files/database folder
      - ./docker-files/database:/app/database
      # Map container's reports folder to host's docker-files/reports folder
      - ./docker-files/reports:/app/reports
      # Map container's docker-files/config folder to host's docker-files/config folder
      - ./docker-files/config:/app/docker-files/config
